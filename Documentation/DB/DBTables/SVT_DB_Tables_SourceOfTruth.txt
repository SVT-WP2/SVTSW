Table WaferType {
  id integer [primary key, increment]
  name string
  engineeringRun engineeringRun
  foundry foundry
  technology waferTech
  waferMap JSON
}

Table Wafer {
  id integer [primary key, increment]
  serialNumber string [unique]
  batchNumber integer
  thinningDate date
  dicingDate date
  productionDate date
  waferTypeId integer [ref: > WaferType.id]
}

Table WaferLocation {
  waferid integer [ref: > Wafer.id, not null]
  generalLocation wpGeneralLocation
  creationTime timestamp [default: `CURRENT_TIMESTAMP`]
  description string
}

Table Version {
  id integer [primary key]
  name string
  baseVersion integer [ref: > Version.id]
  creationTime timestamp [default: `CURRENT_TIMESTAMP`]
  description string
}

Table WaferTypeImage {
  waferTypeId integer [ref: > WaferType.id, not null]
  imageBase64String string [not null]
}

Table WaferTypeSubMap {
  waferTypeId integer [ref: > WaferType.id]
  orientation waferMapOrientation
  waferTypeSubmap JSON
}

Table Asic {
  id integer [primary key, increment]
  waferId integer [ref: > Wafer.id]
  serialNumber string [unique]
  familyType asicFamilytype
  waferMapPosition string
}

Table ProbeCard {
  id integer [primary key, increment]
  serialNumber string [unique]
  vendor pcVendor
  name pcName
  model pcModel
  version integer
  arrivalDate date
  location pcLocation
  type pcType
  vendorCleaningInterval integer
}

Table ProbeCardFamilyType {
  probeCardId integer [ref: > ProbeCard.id]
  asicFamilyType asicFamilytype
}

Table WaferProbeMachine {
  id integer [primary key, increment]
  name string [unique]
  hostName string
  connectionType wpConnectionType
  connectionPort integer
  generalLocation wpGeneralLocation
  software wpSwType
  swVersion string
  vendor wpVendor
  probeCardId integer [ref: > ProbeCard.id]
}

Table WaferProbeProject {
  id integer [primary key, increment]
  wpMachineId integer [ref: > WaferProbeMachine.id]
  waferTypeId integer [ref: > WaferType.id]
  asicFamilyType asicFamilytype
  orientation waferMapOrientation
  name string [unique]
  alignmentDie string
  homeDie string
}

Table ProbeCardMaintenance {
  id integer [primary key, increment]
  probeCardId integer [ref: > ProbeCard.id]
  cleaningDate date
  totNumContacts integer
  numContactsSinceLastCleaning integer
  numContactsDuringCleaning integer
  cleaningOverdrive integer
}

Table AsicProbing {
  id integer [primary key, increment]
  asicId integer [ref: > Asic.id]
  numContacts integer
  mechanicalQuality contactMechanicalQuality
  arrivalDate date
}

Table WaferLoadedInMachine {
  id integer [primary key, increment]
  machineId integer [ref: > WaferProbeMachine.id]
  waferSerialNumber string [ref: > Wafer.serialNumber]
  date date
  userName string
  status waferInMachineStatus
}

Table AsicConfiguration {
  id integer [primary key, increment]
  probeStationId integer [ref: > WaferProbeMachine.id]
  versionId integer [ref: > Version.id]
  isTestingAllowed boolean
}

Table WpConfiguration {
  id integer [primary key, increment]
  wpMachineId integer [ref: > WaferProbeMachine.id]
  versionId integer [ref: > Version.id]
  orientation waferMapOrientation
}

Table ProbeCardConfiguration {
  id integer [primary key, increment]
  probeCardId integer [ref: > ProbeCard.id]
  versionId integer [ref: > Version.id]
  cleaningInterval integer
}

Enum engineeringRun {
  ER1
  ER2
  ER3
  LAS1
  Ancillary1
}

Enum foundry {
  TowerSemiconductor
  Xfab
}

Enum waferTech {
  TPSCo65
  Xfab110
}

Enum asicFamilytype {
  MOSS
  BABYMOSS
  NKF7
  MOSAIX
  BabyMOSAIX
  LAS
  Ancillary
  CE65_V1CG_I5U_SQ
  CE65_V2CG_I5U_SQ
  CE65_V2CG_I8U_SQ
  CE65_V2CG_I8U_HSQ
  CE65_V2CG_22U5_SQ
  CE65_V2CG_22U5_HSQ
  CE65_V2CN_I5U_SQ
  CE65_V2CN_I8U_SQ
  CE65_V2CN_18U_HSQ
  CE65_V2CN_22U5_SQ
  CE65_V2CN_22U5_HSQ
  AOIO_P
  AO_IO
  AOIO_8
  S
  DESY
  NONAME1
  CE65_V1CN_I5U_SQ
  NONAME2
  CE65_V1CB_I5U_SQ
  dPTSN
  dP_TS
  AFISP
  AFISB
  AF_IS
  RAL_TXRX_ER1    
  TTS_5
  TTS_4
  CE65_V2CB_I5U_SQ
  CE65_V2CB_22U5_SQ
  CE65_V2CB_I8U_HSQ
  CE65_V2CB_22U5_HSQ
  CE65_V2CB_I8U_SQ
  NKF5
  NKF6
  NONAME5
  SEU_2_INFN_BAR_GDR
  SEU_1_INFN_BAR_GDR
  TTS_3
  TTS_2
  TTS_1
  NONAME4
  NONAME_LONG    
}

Enum waferMapOrientation {
  North
  South
  East
  West
}

Enum wpConnectionType {
  TCPIP
  GPIB
  RS232
  USB
  Ethernet
  Modbus
  LAN
}

Enum wpGeneralLocation {
  CERN_186_R_E10
  Prague
  LosAlamos
  BNL
  RAL
}

Enum wpSwType {
  Sentio
  VeloxCascade
}

Enum wpVendor {
  MPI
  CascadeMicrotech
  FormFactor
}

Enum pcVendor {
  MPI
  Korea
  Synergie
  FormFactorPC
}

Enum pcName {
  NKF7_MPI
  BabyMOSS_Korea
  Mosaix_Korea
}

Enum pcModel {
  NKF7
  MosaixLeft
  MosaixRight
  LAS
  BabyMOSS
  Ancillary
}

Enum pcLocation {
  CERN
  Prague
  LosAlamos
  BNL
  RAL
}

Enum pcType {
  Vertical
  Cantilever
}

Enum contactMechanicalQuality {
  Good
  Bad
  AvoidIfPossible
}

Enum waferInMachineStatus {
  Loaded
  Unloaded
}
